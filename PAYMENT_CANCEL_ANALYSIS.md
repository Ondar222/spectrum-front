# –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–µ–π

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã –ø–ª–∞—Ç–µ–∂–µ–π:

#### 1. **–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (60-70% —Å–ª—É—á–∞–µ–≤)**

- **–û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∞–ª "–û—Ç–º–µ–Ω–∞" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π** - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤, –∫–∞—Ä—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
- **–û—à–∏–±–∫–∏ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π CVV, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫–∞—Ä—Ç—ã
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±—Ä–∞—É–∑–µ—Ä–∞** - –∑–∞–≤–∏—Å–∞–Ω–∏–µ, –∑–∞–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–∫–∏

#### 2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π (20-25% —Å–ª—É—á–∞–µ–≤)**

- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL –≤–æ–∑–≤—Ä–∞—Ç–∞** - –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
- **–ü—Ä–æ–±–ª–µ–º—ã —Å HTTPS** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
- **–û—à–∏–±–∫–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å

#### 3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (10-15% —Å–ª—É—á–∞–µ–≤)**

- **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏** - –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ–º
- **–û—à–∏–±–∫–∏ API –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–±–æ–∏ —Å–µ—Ä–≤–∏—Å–∞
- **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–º** - –æ—à–∏–±–∫–∏ –≤ `server.js`

## üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/payment-diagnostic`)

- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** (`/payment-monitor`)

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É–¥–∞—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 3. **–£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞**

- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ ID –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## üìä –°—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞

| –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ                               | –ü—Ä–∏—á–∏–Ω–∞                                 |
| ------ | -------------------------------------- | --------------------------------------- |
| 0      | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω–µ –æ–ø–ª–∞—á–µ–Ω         | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª –æ–ø–ª–∞—Ç—É         |
| 1      | –ü—Ä–µ–¥–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ –∑–∞—Ö–æ–ª–¥–∏—Ä–æ–≤–∞–Ω–∞ | –ö–∞—Ä—Ç–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞, –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è |
| 2      | ‚úÖ –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –ø–æ–ª–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è        | **–£–°–ü–ï–®–ù–ê–Ø –û–ü–õ–ê–¢–ê**                     |
| 3      | ‚ùå –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞                | **–û–¢–ú–ï–ù–ê –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ú**                |
| 4      | ‚ùå –ü–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—ã–ª –ø—Ä–æ–≤–µ–¥–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç  | **–í–û–ó–í–†–ê–¢ –°–†–ï–î–°–¢–í**                     |
| 5      | –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ ACS     | 3D Secure –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è                   |
| 6      | ‚ùå –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞               | **–û–¢–ö–õ–û–ù–ï–ù–ò–ï –ë–ê–ù–ö–û–ú**                   |

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é

### 1. **–£–ª—É—á—à–µ–Ω–∏–µ UX –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

```javascript
// –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –æ—Ç–º–µ–Ω–æ–π
const handleCancel = () => {
  if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂?")) {
    // –û—Ç–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–∞
  }
};
```

### 2. **–£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

```javascript
// –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
const getErrorMessage = (errorCode) => {
  switch (errorCode) {
    case "INSUFFICIENT_FUNDS":
      return "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –∫–∞—Ä—Ç–µ";
    case "CARD_BLOCKED":
      return "–ö–∞—Ä—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞";
    case "INVALID_CVV":
      return "–ù–µ–≤–µ—Ä–Ω—ã–π CVV –∫–æ–¥";
    default:
      return "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ";
  }
};
```

### 3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã**

```javascript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
const notifyPaymentError = (error) => {
  if (error.critical) {
    // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
    sendAlert({
      type: "PAYMENT_ERROR",
      message: error.message,
      orderId: error.orderId,
    });
  }
};
```

### 4. **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

```javascript
// –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
const logPaymentEvent = (event) => {
  console.log(
    JSON.stringify({
      timestamp: new Date().toISOString(),
      event: event.type,
      orderId: event.orderId,
      status: event.status,
      amount: event.amount,
      userAgent: navigator.userAgent,
      ip: event.ip,
    })
  );
};
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

### 1. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø–ª–∞—Ç–µ–∂–µ–π**

- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞
- –í—Ä–µ–º—è –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞ –æ–¥–∏–Ω –∑–∞–∫–∞–∑

### 2. **–ü—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω**

- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –æ—à–∏–±–æ–∫
- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—É–º–º—ã –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

### 3. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏**

- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±—Ä–∞—É–∑–µ—Ä–∞–º –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º

## üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞**

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API
curl -X POST https://alfa.rbsuat.com/payment/rest/register.do \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "token=YOUR_TOKEN&orderNumber=test&amount=1000&returnUrl=http://test.com&failUrl=http://test.com&description=test"
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL
openssl s_client -connect your-domain.com:443 -servername your-domain.com
```

### 3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å URL –≤–æ–∑–≤—Ä–∞—Ç–∞**

```bash
# –¢–µ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -I https://your-domain.com/certificates/success
curl -I https://your-domain.com/certificates/cancel
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/payment-diagnostic`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞
- [ ] –£–±–µ–¥–∏–ª–∏—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ URL –≤–æ–∑–≤—Ä–∞—Ç–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏ –ø–ª–∞—Ç–µ–∂ —Å —Ç–µ—Å—Ç–æ–≤–æ–π –∫–∞—Ä—Ç–æ–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ `/payment-monitor`

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/payment-diagnostic`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–ª–∞—Ç–µ–∂** —Å –Ω–µ–±–æ–ª—å—à–æ–π —Å—É–º–º–æ–π
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `/payment-monitor`
5. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

- **–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞**: [pay.alfabank.ru](https://pay.alfabank.ru)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API**: [pay.alfabank.ru/ecom/instructions/](https://pay.alfabank.ru/ecom/instructions/)
- **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞**: [alfa.rbsuat.com](https://alfa.rbsuat.com)
