// –°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —É—Å–ª—É–≥ –ø–æ —Ç–∏–ø–∞–º
export interface ServiceCategory {
    id: string;
    name: string;
    slug: string;
    icon: string;
    description: string;
    keywords: string[];
}

export interface ServiceSubcategory {
    id: string;
    name: string;
    slug: string;
    parentCategory: string;
    keywords: string[];
    description: string;
}

// –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥
export const SERVICE_CATEGORIES: ServiceCategory[] = [
    {
        id: 'laboratory',
        name: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞',
        slug: 'laboratory',
        icon: 'üß™',
        description: '–ê–Ω–∞–ª–∏–∑—ã –∫—Ä–æ–≤–∏, –º–æ—á–∏, –±–∏–æ—Ö–∏–º–∏—á–µ—Å–∫–∏–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è',
        keywords: ['–∞–Ω–∞–ª–∏–∑', '–∫—Ä–æ–≤—å', '–º–æ—á–∞', '–±–∏–æ—Ö–∏–º–∏—è', '–≥–µ–º–∞—Ç–æ–ª–æ–≥', '–ª–∞–±–æ—Ä–∞—Ç–æ—Ä', '–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ']
    },
    {
        id: 'ultrasound',
        name: '–£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞',
        slug: 'ultrasound',
        icon: 'üì°',
        description: '–£–ó–ò —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –æ—Ä–≥–∞–Ω–æ–≤ –∏ —Å–∏—Å—Ç–µ–º',
        keywords: ['—É–∑–∏', '—É–ª—å—Ç—Ä–∞–∑–≤', '—Å–æ–Ω–æ–≥—Ä–∞—Ñ', '—ç—Ö–æ–≥—Ä–∞—Ñ']
    },
    {
        id: 'consultations',
        name: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤',
        slug: 'consultations',
        icon: 'üë®‚Äç‚öïÔ∏è',
        description: '–ü—Ä–∏–µ–º—ã –≤—Ä–∞—á–µ–π —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π',
        keywords: ['–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ø—Ä–∏–µ–º', '–æ—Å–º–æ—Ç—Ä', '–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞']
    },
    {
        id: 'functional',
        name: '–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞',
        slug: 'functional',
        icon: 'üìä',
        description: '–≠–ö–ì, —Å–ø–∏—Ä–æ–º–µ—Ç—Ä–∏—è, —ç—Ö–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è',
        keywords: ['—ç–∫–≥', '—Å–ø–∏—Ä–æ–º–µ—Ç—Ä', '—ç—Ö–æ–∫–∞—Ä–¥–∏–æ', '—Ñ—É–Ω–∫—Ü–∏–æ–Ω', '–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥']
    },
    {
        id: 'endoscopy',
        name: '–≠–Ω–¥–æ—Å–∫–æ–ø–∏—è',
        slug: 'endoscopy',
        icon: 'üîç',
        description: '–ì–∞—Å—Ç—Ä–æ—Å–∫–æ–ø–∏—è, –∫–æ–ª–æ–Ω–æ—Å–∫–æ–ø–∏—è, –±—Ä–æ–Ω—Ö–æ—Å–∫–æ–ø–∏—è',
        keywords: ['—ç–Ω–¥–æ—Å–∫–æ–ø', '–≥–∞—Å—Ç—Ä–æ—Å–∫–æ–ø', '–∫–æ–ª–æ–Ω–æ—Å–∫–æ–ø', '–±—Ä–æ–Ω—Ö–æ—Å–∫–æ–ø']
    },
    {
        id: 'surgery',
        name: '–•–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–∏–µ —É—Å–ª—É–≥–∏',
        slug: 'surgery',
        icon: '‚öïÔ∏è',
        description: '–û–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
        keywords: ['–æ–ø–µ—Ä–∞—Ü–∏—è', '—Ö–∏—Ä—É—Ä–≥', '–≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ', '–ø—Ä–æ—Ü–µ–¥—É—Ä–∞', '–ª–∞–∑–µ—Ä']
    },
    {
        id: 'cosmetology',
        name: '–ö–æ—Å–º–µ—Ç–æ–ª–æ–≥–∏—è',
        slug: 'cosmetology',
        icon: 'üíÑ',
        description: '–≠—Å—Ç–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –∏ —É—Ö–æ–¥',
        keywords: ['–∫–æ—Å–º–µ—Ç', '—ç—Å—Ç–µ—Ç–∏–∫', '–ª–∞–∑–µ—Ä', '–∏–Ω—ä–µ–∫—Ü', '–±–æ—Ç–æ–∫—Å']
    },
    {
        id: 'physiotherapy',
        name: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–∏—è',
        slug: 'physiotherapy',
        icon: '‚ö°',
        description: '–§–∏–∑–∏–æ—Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã',
        keywords: ['—Ñ–∏–∑–∏–æ—Ç', '—Ä–µ–∞–±–∏–ª', '–º–∞—Å—Å–∞–∂', '—ç–ª–µ–∫—Ç—Ä–æ', '–º–∞–≥–Ω–∏—Ç']
    }
];

// –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
export const SERVICE_SUBCATEGORIES: ServiceSubcategory[] = [
    // –ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è
    {
        id: 'gynecology-ultrasound',
        name: '–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –£–ó–ò',
        slug: 'gynecology-ultrasound',
        parentCategory: 'ultrasound',
        keywords: ['–≥–∏–Ω–µ–∫', '—É–∑–∏', '–º–∞—Ç–∫–∞', '—è–∏—á–Ω–∏–∫', '—Ñ–æ–ª–ª–∏–∫—É–ª', '–±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç—å'],
        description: '–£–ó–ò –æ—Ä–≥–∞–Ω–æ–≤ –º–∞–ª–æ–≥–æ —Ç–∞–∑–∞, —Ñ–æ–ª–ª–∏–∫—É–ª–æ–º–µ—Ç—Ä–∏—è, —Å–∫—Ä–∏–Ω–∏–Ω–≥ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏'
    },
    {
        id: 'gynecology-consultations',
        name: '–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏',
        slug: 'gynecology-consultations',
        parentCategory: 'consultations',
        keywords: ['–≥–∏–Ω–µ–∫', '–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ø—Ä–∏–µ–º', '–æ—Å–º–æ—Ç—Ä'],
        description: '–ü—Ä–∏–µ–º—ã –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∞, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–º–æ—Ç—Ä—ã'
    },
    {
        id: 'gynecology-analyses',
        name: '–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã',
        slug: 'gynecology-analyses',
        parentCategory: 'laboratory',
        keywords: ['–≥–∏–Ω–µ–∫', '–∞–Ω–∞–ª–∏–∑', '–º–∞–∑–æ–∫', '–≥–æ—Ä–º–æ–Ω', '–∏–Ω—Ñ–µ–∫—Ü', '—Ü–∏—Ç–æ–ª–æ–≥'],
        description: '–ê–Ω–∞–ª–∏–∑—ã –Ω–∞ –∏–Ω—Ñ–µ–∫—Ü–∏–∏, –≥–æ—Ä–º–æ–Ω—ã, —Ü–∏—Ç–æ–ª–æ–≥–∏—è'
    },
    {
        id: 'gynecology-surgery',
        name: '–ì–∏–Ω–µ–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Ö–∏—Ä—É—Ä–≥–∏—è',
        slug: 'gynecology-surgery',
        parentCategory: 'surgery',
        keywords: ['–≥–∏–Ω–µ–∫', '–ª–∞–∑–µ—Ä', '–æ–ø–µ—Ä–∞—Ü–∏—è', '—É–¥–∞–ª–µ–Ω–∏–µ', '–∫–æ–∞–≥—É–ª—è—Ü–∏—è'],
        description: '–õ–∞–∑–µ—Ä–Ω–∞—è –≥–∏–Ω–µ–∫–æ–ª–æ–≥–∏—è, –º–∞–ª–æ–∏–Ω–≤–∞–∑–∏–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏'
    },

    // –£—Ä–æ–ª–æ–≥–∏—è
    {
        id: 'urology-ultrasound',
        name: '–£—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –£–ó–ò',
        slug: 'urology-ultrasound',
        parentCategory: 'ultrasound',
        keywords: ['—É—Ä–æ–ª', '—É–∑–∏', '–ø–æ—á–∫–∞', '–º–æ—á–µ–≤–æ–π', '–ø—Ä–æ—Å—Ç–∞—Ç–∞'],
        description: '–£–ó–ò –ø–æ—á–µ–∫, –º–æ—á–µ–≤–æ–≥–æ –ø—É–∑—ã—Ä—è, –ø—Ä–æ—Å—Ç–∞—Ç—ã'
    },
    {
        id: 'urology-consultations',
        name: '–£—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏',
        slug: 'urology-consultations',
        parentCategory: 'consultations',
        keywords: ['—É—Ä–æ–ª', '–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ø—Ä–∏–µ–º', '–æ—Å–º–æ—Ç—Ä'],
        description: '–ü—Ä–∏–µ–º—ã —É—Ä–æ–ª–æ–≥–∞, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–º–æ—Ç—Ä—ã'
    },
    {
        id: 'urology-analyses',
        name: '–£—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã',
        slug: 'urology-analyses',
        parentCategory: 'laboratory',
        keywords: ['—É—Ä–æ–ª', '–∞–Ω–∞–ª–∏–∑', '–º–æ—á–∞', '–ø–æ—Å–µ–≤', '—Å–ø–µ—Ä–º–æ–≥—Ä–∞–º–º'],
        description: '–ê–Ω–∞–ª–∏–∑—ã –º–æ—á–∏, –ø–æ—Å–µ–≤—ã, —Å–ø–µ—Ä–º–æ–≥—Ä–∞–º–º–∞'
    },

    // –ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—è
    {
        id: 'cardiology-consultations',
        name: '–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏',
        slug: 'cardiology-consultations',
        parentCategory: 'consultations',
        keywords: ['–∫–∞—Ä–¥–∏', '–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ø—Ä–∏–µ–º', '–æ—Å–º–æ—Ç—Ä'],
        description: '–ü—Ä–∏–µ–º—ã –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∞, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º —Å–µ—Ä–¥—Ü–∞'
    },
    {
        id: 'cardiology-functional',
        name: '–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞',
        slug: 'cardiology-functional',
        parentCategory: 'functional',
        keywords: ['–∫–∞—Ä–¥–∏', '—ç–∫–≥', '—ç—Ö–æ–∫–∞—Ä–¥–∏–æ', '—Ö–æ–ª—Ç–µ—Ä', '–≤–µ–ª–æ—ç—Ä–≥–æ–º–µ—Ç—Ä'],
        description: '–≠–ö–ì, —ç—Ö–æ–∫–∞—Ä–¥–∏–æ–≥—Ä–∞—Ñ–∏—è, —Ö–æ–ª—Ç–µ—Ä–æ–≤—Å–∫–æ–µ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ'
    },
    {
        id: 'cardiology-analyses',
        name: '–ö–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã',
        slug: 'cardiology-analyses',
        parentCategory: 'laboratory',
        keywords: ['–∫–∞—Ä–¥–∏', '–∞–Ω–∞–ª–∏–∑', '—Ç—Ä–æ–ø–æ–Ω–∏–Ω', '–∫—Ä–µ–∞—Ç–∏–Ω–∫–∏–Ω–∞–∑–∞', '–ª–∏–ø–∏–¥'],
        description: '–ê–Ω–∞–ª–∏–∑—ã –Ω–∞ –º–∞—Ä–∫–µ—Ä—ã —Å–µ—Ä–¥–µ—á–Ω—ã—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π'
    },

    // –ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—è
    {
        id: 'gastro-consultations',
        name: '–ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏',
        slug: 'gastro-consultations',
        parentCategory: 'consultations',
        keywords: ['–≥–∞—Å—Ç—Ä–æ', '–∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è', '–ø—Ä–∏–µ–º', '–æ—Å–º–æ—Ç—Ä'],
        description: '–ü—Ä–∏–µ–º—ã –≥–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∞, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ñ–ö–¢'
    },
    {
        id: 'gastro-endoscopy',
        name: '–ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —ç–Ω–¥–æ—Å–∫–æ–ø–∏—è',
        slug: 'gastro-endoscopy',
        parentCategory: 'endoscopy',
        keywords: ['–≥–∞—Å—Ç—Ä–æ', '—ç–Ω–¥–æ—Å–∫–æ–ø', '–≥–∞—Å—Ç—Ä–æ—Å–∫–æ–ø', '–∫–æ–ª–æ–Ω–æ—Å–∫–æ–ø'],
        description: '–ì–∞—Å—Ç—Ä–æ—Å–∫–æ–ø–∏—è, –∫–æ–ª–æ–Ω–æ—Å–∫–æ–ø–∏—è, —Ä–µ–∫—Ç–æ—Ä–æ–º–∞–Ω–æ—Å–∫–æ–ø–∏—è'
    },
    {
        id: 'gastro-ultrasound',
        name: '–ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –£–ó–ò',
        slug: 'gastro-ultrasound',
        parentCategory: 'ultrasound',
        keywords: ['–≥–∞—Å—Ç—Ä–æ', '—É–∑–∏', '–ø–µ—á–µ–Ω—å', '–∂–µ–ª—á–Ω—ã–π', '–ø–æ–¥–∂–µ–ª—É–¥–æ—á–Ω–∞—è'],
        description: '–£–ó–ò –æ—Ä–≥–∞–Ω–æ–≤ –±—Ä—é—à–Ω–æ–π –ø–æ–ª–æ—Å—Ç–∏'
    },
    {
        id: 'gastro-analyses',
        name: '–ì–∞—Å—Ç—Ä–æ—ç–Ω—Ç–µ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∞–Ω–∞–ª–∏–∑—ã',
        slug: 'gastro-analyses',
        parentCategory: 'laboratory',
        keywords: ['–≥–∞—Å—Ç—Ä–æ', '–∞–Ω–∞–ª–∏–∑', '–ø–µ—á–µ–Ω–æ—á–Ω', '–∞–º–∏–ª–∞–∑–∞', '–ª–∏–ø–∞–∑–∞'],
        description: '–ê–Ω–∞–ª–∏–∑—ã –Ω–∞ —Ñ–µ—Ä–º–µ–Ω—Ç—ã, –º–∞—Ä–∫–µ—Ä—ã –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π –ñ–ö–¢'
    }
];

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
export function getServiceCategory(serviceName: string, serviceGroup?: string): ServiceCategory | null {
    const text = `${serviceName} ${serviceGroup || ''}`.toLowerCase();

    for (const category of SERVICE_CATEGORIES) {
        if (category.keywords.some(keyword => text.includes(keyword))) {
            return category;
        }
    }

    return null;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
export function getServiceSubcategory(serviceName: string, serviceGroup?: string, direction?: string): ServiceSubcategory | null {
    const text = `${serviceName} ${serviceGroup || ''} ${direction || ''}`.toLowerCase();

    for (const subcategory of SERVICE_SUBCATEGORIES) {
        if (subcategory.keywords.some(keyword => text.includes(keyword))) {
            return subcategory;
        }
    }

    return null;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —É—Å–ª—É–≥ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
export function groupServicesByCategory(services: any[], direction?: string) {
    const grouped: { [key: string]: any[] } = {};

    services.forEach(service => {
        const category = getServiceCategory(service.name, service.group);
        const subcategory = getServiceSubcategory(service.name, service.group, direction);

        if (category) {
            const key = subcategory ? `${category.id}-${subcategory.id}` : category.id;
            if (!grouped[key]) {
                grouped[key] = [];
            }
            grouped[key].push({
                ...service,
                category,
                subcategory
            });
        }
    });

    return grouped;
}
