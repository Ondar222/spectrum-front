# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã - –°–≤–æ–¥–∫–∞

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ü–ª–∞—Ç–µ–∂–∏ –æ—Ç–∫–ª–æ–Ω—è–ª–∏—Å—å —Å –æ—à–∏–±–∫–æ–π: **"–ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ api —Ç–æ–∫–µ–Ω–∞, username –∏ password –¥–æ–ª–∂–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å"**

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–£–±—Ä–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `userName` –∏ `password` –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞. –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `token` –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `server.js`

- –£–±—Ä–∞–Ω—ã `userName` –∏ `password` –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `/register.do`
- –£–±—Ä–∞–Ω—ã `userName` –∏ `password` –∏–∑ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ `/getOrderStatus.do`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### 2. –°–æ–∑–¥–∞–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

- –ù–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç `/payment-diagnostic`
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 3. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ë–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
curl -X POST http://localhost:3001/api/payment/register \
  -H "Content-Type: application/json" \
  -d '{"amount": 1000, "returnUrl": "http://localhost:3000/success", "failUrl": "http://localhost:3000/cancel", "description": "test"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"success":true,"formUrl":"https://alfa.rbsuat.com/payment/merchants/ecom2/payment_ru.html?mdOrder=...","orderId":"...","orderNumber":"..."}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl -X POST http://localhost:3001/api/payment/status \
  -H "Content-Type: application/json" \
  -d '{"orderId": "0036fff2-590f-7381-aaee-e79e024384c6"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: {"success":true,"OrderStatus":0,"Amount":100000,...}
```

## üìã –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –°—Ç–∞—Ç—É—Å      |
| ----------------- | ----------- |
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞  | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫  | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ       | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞       | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/payment-diagnostic`
2. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –ø–ª–∞—Ç–µ–∂–∞
3. –ù–∞–∂–º–∏—Ç–µ "–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/certificates`
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É –ø–æ–¥–∞—Ä–æ—á–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
3. –ù–∞–∂–º–∏—Ç–µ "–û–ø–ª–∞—Ç–∏—Ç—å"
4. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–ø–ª–∞—Ç—ã

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `PAYMENT_TROUBLESHOOTING.md`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `PAYMENT_INTEGRATION.md`
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏: `README_PAYMENT.md`

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–ª–∞—Ç–µ–∂–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

- –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `/payment-diagnostic`
- –°—Ç–∞—Ç—É—Å—ã –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ API

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞**: –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞
2. **–ü—Ä–æ–¥–∞–∫—à–Ω**: –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω –∑–∞–º–µ–Ω–∏—Ç–µ URL –≤ `server.js`
3. **SSL**: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
4. **–õ–æ–≥–∏**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ò–∑—É—á–∏—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ê–ª—å—Ñ–∞-–ë–∞–Ω–∫–∞
